{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Jekyll Dev",
      "type": "shell",
      "command": "JEKYLL_ENV=development bundle exec jekyll serve --livereload --drafts --trace",
      "isBackground": true,
      // This "problemMatcher" does two things:
      // 1) Creates a dummy pattern capturing the entire line as both file and message
      // 2) Uses "background" to detect when Jekyll is done starting
      "problemMatcher": {
        "owner": "custom",
        "pattern": [
          {
            // Just capture the whole line in one group
            "regexp": "^(.*)$",
            "file": 1,
            "message": 1
          }
        ],
        "background": {
          "activeOnStart": true,
          // We can start listening from the very first line
          "beginsPattern": "^",
          // Once Jekyll prints "Server running..." we consider the server "ready"
          // Adjust this to match your actual final Jekyll output, e.g. "Press Ctrl-C to stop."
          "endsPattern": "Server running..."
        }
      }
    },
    {
      "label": "Jekyll Prod",
      "type": "shell",
      "command": "JEKYLL_ENV=production bundle exec jekyll serve --trace",
      "isBackground": true,
      "problemMatcher": {
        "owner": "custom",
        "pattern": [
          {
            "regexp": "^(.*)$",
            "file": 1,
            "message": 1
          }
        ],
        "background": {
          "activeOnStart": true,
          "beginsPattern": "^",
          "endsPattern": "Server running..."
        }
      }
    }
  ]
}
